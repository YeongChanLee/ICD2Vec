---
title: "EDA"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(data.table)
library(plotly)
library(tsne)

```

## Reading ICD2Vec


```{r icd2vec}
all_icd <- fread("../ICD2Vec/ICD2Vec.csv", header = TRUE, data.table=FALSE)
colnames(all_icd)[3:302] <- paste0("V", 1:300)
all_icd <- all_icd[,-1]
all_icd <- rename(all_icd, DIS_NAME = DIS_CODE)
nrow(all_icd)
```

## 3D Plotting after PCA


```{r 3dplot, echo=FALSE}
pca_icd <- prcomp(all_icd[,2:301], scale. = TRUE)
pca_icd <- as.data.frame(pca_icd$x[,1:3])
pca_icd <- bind_cols(pca_icd, select(all_icd, DIS_NAME))

pca_icd$DIS_NAME2 <- substr(pca_icd$DIS_NAME, 1, 1)

#plot_ly(pca_icd, x = ~PC1, y = ~PC2, z = ~PC3, color=~DIS_NAME2, text=~DIS_NAME,
#        marker = list(size = 2))

```

## 2D Plotting after PCA


```{r 2dplot, echo=FALSE}


#plot_ly(pca_icd, x = ~PC1, y = ~PC2, color=~DIS_NAME2, text=~DIS_NAME,
#        marker = list(size = 5))


```

